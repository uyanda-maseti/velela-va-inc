<!DOCTYPE html>
<html>
<head>
  <title>Submission Alerts</title>
</head>
<body>
  <h2>Listening for new form submissions...</h2>
  <script>
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzXYZ123/exec"; // your URL

    async function checkForUpdates() {
      try {
        const response = await fetch(WEB_APP_URL + "?mode=getNotification");
        const message = await response.text();
        if (message && message !== window.lastMessage) {
          window.lastMessage = message;
          new Notification("Client Form Alert", { body: message });
        }
      } catch (err) {
        console.error("Error fetching notification:", err);
      }
    }

    async function requestPermission() {
      const permission = await Notification.requestPermission();
      if (permission === "granted") {
        console.log("Notifications enabled!");
        setInterval(checkForUpdates, 5000); // check every 5 seconds
      } else {
        alert("Please allow notifications in your browser settings.");
      }
    }

    requestPermission();
  </script>
</body>
</html>
